<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">    <title>Sign In</title>
    <style>
        .input:focus{box-shadow: none;}

    </style>

</head>
<body style="background-color: whitesmoke;">
        <div class="container pt-3">
                <div class="row justify-content-center">
                    <div class="h2">Sign in</div>
                </div>
                <div class="row justify-content-center">
                    <div class="col-10 col-lg-5 col-sm-12 border p-5" style="background-color: white;box-shadow: 0 0 10px #ab9d9d">
                        <form onsubmit="signin(event)">
                            <div class="form-group">
                              <label for="email" class="label">Email</label>
                              <input type="email" required class="form-control input" id="email" aria-describedby="emailHelp" placeholder="Enter email">
                            </div>
                            <div class="form-group">
                              <label for="pswd" class="label">Password</label>
                              <input type="password" required class="form-control input" id="pswd" aria-describedby="pswdHelp" placeholder="Password">
                            </div>
                            <div class="form-group text-center">
                                <div class="text-danger pb-2" style="visibility: hidden;" id='msg'></div>
                                <button type="reset" class="btn btn-secondary">Cancel</button>
                                <button type="submit" class="btn btn-primary">Sign in</button>
                            </div>
                          </form>
                    </div>
                </div>
        </div>

        <script>
            function signin(e){
                e.preventDefault()
                let em = document.getElementById('email').value,
                    ps = document.getElementById('pswd').value;
                    let h = new XMLHttpRequest();
            h.open("GET", "php/signin.php?email="+em+'&pswd='+ps, true);
            h.onreadystatechange = function(){
                if (this.readyState == 4 && this.status == 200) {
                    let r=this.responseText,msg = document.getElementById('msg');msg.style.visibility = 'visible'
                    if(r!=1)msg.innerHTML = 'Incorrect email or password';
                    else location.replace('dashboard');
                        console.log(r)
                    }
            }
            h.send(); 

            }
        </script>

</body>
</html>